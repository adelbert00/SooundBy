{"version":3,"file":"index.umd.js","sources":["../src/form.js","../src/remember.js","../src/app.js","../src/head.js","../src/link.js","../src/createInertiaApp.js"],"sourcesContent":["import Vue from 'vue'\nimport isEqual from 'lodash.isequal'\nimport cloneDeep from 'lodash.clonedeep'\nimport { Inertia } from '@inertiajs/inertia'\n\nexport default function(...args) {\n  const rememberKey = typeof args[0] === 'string' ? args[0] : null\n  const data = (typeof args[0] === 'string' ? args[1] : args[0]) || {}\n  const restored = rememberKey ? Inertia.restore(rememberKey) : null\n  let defaults = cloneDeep(data)\n  let cancelToken = null\n  let recentlySuccessfulTimeoutId = null\n  let transform = data => data\n\n  const form = Vue.observable({\n    ...restored ? restored.data : data,\n    isDirty: false,\n    errors: restored ? restored.errors : {},\n    hasErrors: false,\n    processing: false,\n    progress: null,\n    wasSuccessful: false,\n    recentlySuccessful: false,\n    data() {\n      return Object\n        .keys(data)\n        .reduce((carry, key) => {\n          carry[key] = this[key]\n          return carry\n        }, {})\n    },\n    transform(callback) {\n      transform = callback\n\n      return this\n    },\n    defaults(key, value) {\n      if (typeof key === 'undefined') {\n        defaults = this.data()\n      } else {\n        defaults = Object.assign(\n          {},\n          cloneDeep(defaults),\n          value ? ({[key]: value}) : key,\n        )\n      }\n\n      return this\n    },\n    reset(...fields) {\n      let clonedDefaults = cloneDeep(defaults)\n      if (fields.length === 0) {\n        Object.assign(this, clonedDefaults)\n      } else {\n        Object.assign(\n          this,\n          Object\n            .keys(clonedDefaults)\n            .filter(key => fields.includes(key))\n            .reduce((carry, key) => {\n              carry[key] = clonedDefaults[key]\n              return carry\n            }, {}),\n        )\n      }\n\n      return this\n    },\n    setError(key, value) {\n      Object.assign(this.errors, (value ? { [key]: value } : key))\n\n      this.hasErrors = Object.keys(this.errors).length > 0\n\n      return this\n    },\n    clearErrors(...fields) {\n      this.errors = Object\n        .keys(this.errors)\n        .reduce((carry, field) => ({\n          ...carry,\n          ...(fields.length > 0 && !fields.includes(field) ? { [field] : this.errors[field] } : {}),\n        }), {})\n\n      this.hasErrors = Object.keys(this.errors).length > 0\n\n      return this\n    },\n    submit(method, url, options = {}) {\n      const data = transform(this.data())\n      const _options = {\n        ...options,\n        onCancelToken: (token) => {\n          cancelToken = token\n\n          if (options.onCancelToken) {\n            return options.onCancelToken(token)\n          }\n        },\n        onBefore: visit => {\n          this.wasSuccessful = false\n          this.recentlySuccessful = false\n          clearTimeout(recentlySuccessfulTimeoutId)\n\n          if (options.onBefore) {\n            return options.onBefore(visit)\n          }\n        },\n        onStart: visit => {\n          this.processing = true\n\n          if (options.onStart) {\n            return options.onStart(visit)\n          }\n        },\n        onProgress: event => {\n          this.progress = event\n\n          if (options.onProgress) {\n            return options.onProgress(event)\n          }\n        },\n        onSuccess: async page => {\n          this.processing = false\n          this.progress = null\n          this.clearErrors()\n          this.wasSuccessful = true\n          this.recentlySuccessful = true\n          recentlySuccessfulTimeoutId = setTimeout(() => this.recentlySuccessful = false, 2000)\n\n          const onSuccess = options.onSuccess ? await options.onSuccess(page) : null\n          defaults = cloneDeep(this.data())\n          this.isDirty = false\n          return onSuccess\n        },\n        onError: errors => {\n          this.processing = false\n          this.progress = null\n          this.clearErrors().setError(errors)\n\n          if (options.onError) {\n            return options.onError(errors)\n          }\n        },\n        onCancel: () => {\n          this.processing = false\n          this.progress = null\n\n          if (options.onCancel) {\n            return options.onCancel()\n          }\n        },\n        onFinish: () => {\n          this.processing = false\n          this.progress = null\n          cancelToken = null\n\n          if (options.onFinish) {\n            return options.onFinish()\n          }\n        },\n      }\n\n      if (method === 'delete') {\n        Inertia.delete(url, { ..._options, data  })\n      } else {\n        Inertia[method](url, data, _options)\n      }\n    },\n    get(url, options) {\n      this.submit('get', url, options)\n    },\n    post(url, options) {\n      this.submit('post', url, options)\n    },\n    put(url, options) {\n      this.submit('put', url, options)\n    },\n    patch(url, options) {\n      this.submit('patch', url, options)\n    },\n    delete(url, options) {\n      this.submit('delete', url, options)\n    },\n    cancel() {\n      if (cancelToken) {\n        cancelToken.cancel()\n      }\n    },\n    __rememberable: rememberKey === null,\n    __remember() {\n      return { data: this.data(), errors: this.errors }\n    },\n    __restore(restored) {\n      Object.assign(this, restored.data)\n      this.setError(restored.errors)\n    },\n  })\n\n  new Vue({\n    created() {\n      this.$watch(() => form, newValue => {\n        form.isDirty = !isEqual(form.data(), defaults)\n        if (rememberKey) {\n          Inertia.remember(newValue.__remember(), rememberKey)\n        }\n      }, { immediate: true, deep: true })\n    },\n  })\n\n  return form\n}\n","import { Inertia } from '@inertiajs/inertia'\n\nexport default {\n  created() {\n    if (!this.$options.remember || this.$isServer) {\n      return\n    }\n\n    if (Array.isArray(this.$options.remember)) {\n      this.$options.remember = { data: this.$options.remember }\n    }\n\n    if (typeof this.$options.remember === 'string') {\n      this.$options.remember = { data: [this.$options.remember] }\n    }\n\n    if (typeof this.$options.remember.data === 'string') {\n      this.$options.remember = { data: [this.$options.remember.data] }\n    }\n\n    const rememberKey = this.$options.remember.key instanceof Function\n      ? this.$options.remember.key.call(this)\n      : this.$options.remember.key\n\n    const restored = Inertia.restore(rememberKey)\n\n    const rememberable = this.$options.remember.data.filter(key => {\n      return !(this[key] !== null && typeof this[key] === 'object' && this[key].__rememberable === false)\n    })\n\n    const hasCallbacks = (key) => {\n      return this[key] !== null\n        && typeof this[key] === 'object'\n        && typeof this[key].__remember === 'function'\n        && typeof this[key].__restore === 'function'\n    }\n\n    rememberable.forEach(key => {\n      if (this[key] !== undefined && restored !== undefined && restored[key] !== undefined) {\n        hasCallbacks(key) ? this[key].__restore(restored[key]) : (this[key] = restored[key])\n      }\n\n      this.$watch(key, () => {\n        Inertia.remember(\n          rememberable.reduce((data, key) => ({\n            ...data,\n            [key]: hasCallbacks(key) ? this[key].__remember(): this[key],\n          }), {}),\n          rememberKey,\n        )\n      }, { immediate: true, deep: true })\n    })\n  },\n}\n","import form from './form'\nimport remember from './remember'\nimport { createHeadManager, Inertia } from '@inertiajs/inertia'\n\nlet app = {}\nlet headManager = null\n\nexport default {\n  name: 'Inertia',\n  props: {\n    initialPage: {\n      type: Object,\n      required: true,\n    },\n    initialComponent: {\n      type: [Object, Function, String],\n      required: false,\n    },\n    resolveComponent: {\n      type: Function,\n      required: false,\n    },\n    titleCallback: {\n      type: Function,\n      required: false,\n      default: title => title,\n    },\n    onHeadUpdate: {\n      type: Function,\n      required: false,\n      default: () => () => {},\n    },\n  },\n  data() {\n    return {\n      component: this.initialComponent || null,\n      page: this.initialPage,\n      key: null,\n    }\n  },\n  created() {\n    app = this\n    headManager = createHeadManager(this.$isServer, this.titleCallback, this.onHeadUpdate)\n\n    if (!this.$isServer) {\n      Inertia.init({\n        initialPage: this.initialPage,\n        resolveComponent: this.resolveComponent,\n        swapComponent: async ({ component, page, preserveState }) => {\n          this.component = component\n          this.page = page\n          this.key = preserveState ? this.key : Date.now()\n        },\n      })\n    }\n  },\n  render(h) {\n    if (this.component) {\n      const child = h(this.component, {\n        key: this.key,\n        props: this.page.props,\n        scopedSlots: this.$scopedSlots,\n      })\n\n      if (this.component.layout) {\n        if (typeof this.component.layout === 'function') {\n          return this.component.layout(h, child)\n        } else if (Array.isArray(this.component.layout)) {\n          return this.component.layout\n            .concat(child)\n            .reverse()\n            .reduce((child, layout) => h(layout, { props: this.page.props }, [child]))\n        }\n\n        return h(this.component.layout, { props: this.page.props }, [child])\n      }\n\n      return child\n    }\n  },\n}\n\nexport const plugin = {\n  install(Vue) {\n    Inertia.form = form\n    Vue.mixin(remember)\n\n    Vue.mixin({\n      beforeCreate() {\n        Object.defineProperty(this, '$headManager', {\n          get: function () { return headManager },\n        })\n        Object.defineProperty(this, '$inertia', {\n          get: function () { return Inertia },\n        })\n        Object.defineProperty(this, '$page', {\n          get: function () { return app.page },\n        })\n      },\n    })\n  },\n}\n","export default {\n  props: {\n    title: {\n      type: String,\n      required: false,\n    },\n  },\n  data() {\n    return {\n      provider: this.$headManager.createProvider(),\n    }\n  },\n  beforeDestroy() {\n    this.provider.disconnect()\n  },\n  methods: {\n    isUnaryTag(node) {\n      return [\n        'area', 'base', 'br', 'col', 'embed', 'hr', 'img',\n        'input', 'keygen', 'link', 'meta', 'param', 'source',\n        'track', 'wbr',\n      ].indexOf(node.tag) > -1\n    },\n    renderTagStart(node) {\n      this.ensureNodeHasAttrs(node)\n      const attrs = Object.keys(node.data.attrs).reduce((carry, name) => {\n        const value = node.data.attrs[name]\n        if (name === 'head-key') {\n          return carry\n        } else if (value === '') {\n          return carry + ` ${name}`\n        } else {\n          return carry + ` ${name}=\"${value}\"`\n        }\n      }, '')\n      return `<${node.tag}${attrs}>`\n    },\n    renderTagChildren(node) {\n      return node.children.reduce((html, child) => html + this.renderTag(child), '')\n    },\n    renderTag(node) {\n      if (!node.tag) {\n        return node.text\n      }\n      let html = this.renderTagStart(node)\n      if (node.children) {\n        html += this.renderTagChildren(node)\n      }\n      if (!this.isUnaryTag(node)) {\n        html += `</${node.tag}>`\n      }\n      return html\n    },\n    ensureNodeHasAttrs(node) {\n      node.data = {\n        ...(node.data || {}),\n        attrs: {\n          ...((node.data || {}).attrs || {}),\n        },\n      }\n    },\n    ensureNodeHasInertiaAttribute(node) {\n      this.ensureNodeHasAttrs(node)\n      node.data.attrs['inertia'] = node.data.attrs['head-key'] !== undefined ? node.data.attrs['head-key'] : ''\n      return node\n    },\n    renderNode(node) {\n      this.ensureNodeHasInertiaAttribute(node)\n      return this.renderTag(node)\n    },\n    renderNodes(nodes) {\n      const computed = nodes.map(node => this.renderNode(node)).filter(node => node)\n      if (this.title && !computed.find(tag => tag.startsWith('<title'))) {\n        computed.push(`<title inertia>${this.title}</title>`)\n      }\n      return computed\n    },\n  },\n  render() {\n    this.provider.update(\n      this.renderNodes(this.$scopedSlots.default ? this.$scopedSlots.default() : [])\n    )\n  },\n}\n","import { Inertia, mergeDataIntoQueryString, shouldIntercept } from '@inertiajs/inertia'\n\nexport default {\n  functional: true,\n  props: {\n    as: {\n      type: String,\n      default: 'a',\n    },\n    data: {\n      type: Object,\n      default: () => ({}),\n    },\n    href: {\n      type: String,\n    },\n    method: {\n      type: String,\n      default: 'get',\n    },\n    replace: {\n      type: Boolean,\n      default: false,\n    },\n    preserveScroll: {\n      type: Boolean,\n      default: false,\n    },\n    preserveState: {\n      type: Boolean,\n      default: null,\n    },\n    only: {\n      type: Array,\n      default: () => [],\n    },\n    headers: {\n      type: Object,\n      default: () => ({}),\n    },\n    queryStringArrayFormat: {\n      type: String,\n      default: 'brackets',\n    },\n  },\n  render(h, { props, data, children }) {\n    data.on = {\n      click: () => ({}),\n      cancelToken: () => ({}),\n      start: () => ({}),\n      progress: () => ({}),\n      finish: () => ({}),\n      cancel: () => ({}),\n      success: () => ({}),\n      error: () => ({}),\n      ...(data.on || {}),\n    }\n\n    const as = props.as.toLowerCase()\n    const method = props.method.toLowerCase()\n    const [href, propsData] = mergeDataIntoQueryString(method, props.href || '', props.data, props.queryStringArrayFormat)\n\n    if (as === 'a' && method !== 'get') {\n      console.warn(`Creating POST/PUT/PATCH/DELETE <a> links is discouraged as it causes \"Open Link in New Tab/Window\" accessibility issues.\\n\\nPlease specify a more appropriate element using the \"as\" attribute. For example:\\n\\n<Link href=\"${href}\" method=\"${method}\" as=\"button\">...</Link>`)\n    }\n\n    return h(props.as, {\n      ...data,\n      attrs: {\n        ...data.attrs,\n        ...as === 'a' ? { href } : {},\n      },\n      on: {\n        ...data.on,\n        click: event => {\n          data.on.click(event)\n\n          if (shouldIntercept(event)) {\n            event.preventDefault()\n\n            Inertia.visit(href, {\n              data: propsData,\n              method: method,\n              replace: props.replace,\n              preserveScroll: props.preserveScroll,\n              preserveState: props.preserveState ?? (method !== 'get'),\n              only: props.only,\n              headers: props.headers,\n              onCancelToken: data.on.cancelToken,\n              onBefore: data.on.before,\n              onStart: data.on.start,\n              onProgress: data.on.progress,\n              onFinish: data.on.finish,\n              onCancel: data.on.cancel,\n              onSuccess: data.on.success,\n              onError: data.on.error,\n            })\n          }\n        },\n      },\n    }, children)\n  },\n}\n","import App, { plugin } from './app'\n\nexport default async function createInertiaApp({ id = 'app', resolve, setup, title, page, render }) {\n  const isServer = typeof window === 'undefined'\n  const el = isServer ? null : document.getElementById(id)\n  const initialPage = page || JSON.parse(el.dataset.page)\n  const resolveComponent = name => Promise.resolve(resolve(name)).then(module => module.default || module)\n\n  let head = []\n\n  const vueApp = await resolveComponent(initialPage.component).then(initialComponent => {\n    return setup({\n      el,\n      app: App, // deprecated\n      App,\n      props: {\n        attrs: {\n          id,\n          'data-page': JSON.stringify(initialPage),\n        },\n        props: {\n          initialPage,\n          initialComponent,\n          resolveComponent,\n          titleCallback: title,\n          onHeadUpdate: isServer ? elements => (head = elements) : null,\n        },\n      },\n      plugin,\n    })\n  })\n\n  if (isServer) {\n    return render(vueApp)\n      .then(body => ({ head, body }))\n  }\n}\n"],"names":["args","rememberKey","data","restored","Inertia","restore","defaults","cloneDeep","cancelToken","recentlySuccessfulTimeoutId","transform","form","Vue","observable","isDirty","errors","hasErrors","processing","progress","wasSuccessful","recentlySuccessful","Object","keys","reduce","carry","key","_this","callback","value","this","assign","reset","fields","clonedDefaults","length","filter","includes","setError","clearErrors","field","_this2","submit","method","url","options","_options","onCancelToken","token","onBefore","visit","_this3","clearTimeout","onStart","onProgress","event","onSuccess","page","_this4","setTimeout","onError","onCancel","onFinish","get","post","put","patch","cancel","__rememberable","__remember","__restore","created","$watch","newValue","isEqual","remember","immediate","deep","$options","$isServer","Array","isArray","Function","call","rememberable","hasCallbacks","forEach","undefined","app","headManager","name","props","initialPage","type","required","initialComponent","String","resolveComponent","titleCallback","default","title","onHeadUpdate","component","createHeadManager","init","swapComponent","preserveState","Date","now","render","h","child","scopedSlots","$scopedSlots","layout","concat","reverse","plugin","install","mixin","beforeCreate","defineProperty","provider","$headManager","createProvider","beforeDestroy","disconnect","methods","isUnaryTag","node","indexOf","tag","renderTagStart","ensureNodeHasAttrs","attrs","renderTagChildren","children","html","renderTag","text","ensureNodeHasInertiaAttribute","renderNode","renderNodes","nodes","computed","map","find","startsWith","push","update","functional","as","href","replace","Boolean","preserveScroll","only","headers","queryStringArrayFormat","on","click","start","finish","success","error","toLowerCase","mergeDataIntoQueryString","propsData","console","warn","shouldIntercept","preventDefault","before","id","resolve","setup","isServer","window","el","document","getElementById","JSON","parse","dataset","Promise","then","module","head","App","data-page","stringify","elements","vueApp","body"],"mappings":"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"}